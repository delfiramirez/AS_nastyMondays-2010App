package com.segonquart{	import flash.display.MovieClip;	import flash.events.*;	import flash.text.*;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.events.IOErrorEvent;	import flash.xml.*;	public class LoadingXML extends MovieClip	{		private var _fla:MovieClip;		private var xmlTextField:TextField;		public function LoadingXML (fla:MovieClip)		{			_fla = fla;			this.loadXML ();		}		private function loadXML ():void		{			var loader:URLLoader=new URLLoader();			loader.addEventListener (IOErrorEvent.IO_ERROR, errorHandler);			loader.addEventListener (Event.COMPLETE,completeHandler);			//var request:URLRequest=new URLRequest("http://segonquart.com/webnasty/xml/events.xml?nocache="+new Date().getTime());			var request:URLRequest=new URLRequest("xml/events.xml");			try			{				loader.load (request);			}			catch (error:Error)			{				trace (error+"XML not found.");			}		}		private function completeHandler (event:Event):void		{			var result:XML = new XML(event.target.data);			var myXML:XMLDocument=new XMLDocument();			myXML.ignoreWhite = true;			myXML.parseXML (result.toXMLString());			var node:XMLNode = myXML.firstChild;			var n:int = int(node.childNodes.length);			for (var i:int=0; i<n; i++)			{				var obj:Object=new Object();				obj.date=(node.childNodes[i].attributes["date"]);				var s:int = node.childNodes[i].childNodes.length;				for (var j:int=0; j<s; j++)				{					if (! j)					{						obj.title = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}					if (j == 1)					{						obj.date = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}					if (j == 2)					{						obj.cat = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}					if (j == 3)					{						obj.thumb = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}					if (j == 4)					{						obj.txt = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}					if (j == 5)					{						obj.url = node.childNodes[i].childNodes[j].firstChild.nodeValue;					}				}				_fla.objects_array.push (obj);			}			_fla.loadThumb ();		}		private function errorHandler (e:IOErrorEvent):void		{			xmlTextField.text = "Ups no XML File.";		}	}}